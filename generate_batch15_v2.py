#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
批次15解析脚本 v2.0
严格按照数据标注规则库v2.6和检查清单执行
重点关注：年龄条件、额外给付、特定疾病
"""

import json
import re


def create_batch15_json():
    """手动创建批次15的JSON - 确保每个案例都经过检查"""
    
    cases = [
        # 2801: 癌症保险金，肺癌额外20%
        {
            "序号": 2801,
            "保单ID号": "利安人寿[2014]疾病保险033号",
            "责任类型": "疾病类",
            "责任名称": "癌症保险金",
            "责任原文": "【癌症保险金】若被保险人在等待期后被确诊初次罹患本合同约定的癌症，我们按本合同的基本保险金额给付癌症保险金。若癌症为肺癌，我们将再额外给付基本保险金额的20%。给付癌症保险金后，我们不再承担身故保险金责任，本合同的现金价值减少为0。"已支付的保险费"的含义:本条所述"已支付的保险费"指您根据本合同的约定已支付的保险费。",
            "payoutAmount": [
                {
                    "stageNumber": 1,
                    "period": "等待期后",
                    "waitingPeriodStatus": "after",
                    "formula": "基本保额 * 100%",
                    "note": "若为肺癌，额外给付基本保额的20%"
                }
            ]
        },
        
        # 2802: 第一组重大疾病特别关爱保险金，交费期满前50%
        {
            "序号": 2802,
            "保单ID号": "农银人寿[2021]疾病保险012号",
            "责任类型": "疾病类",
            "责任名称": "第一组重大疾病特别关爱保险金",
            "责任原文": "【第一组重大疾病特别关爱保险金】本主险合同交费期间届满后的首个保单周年日前（不包含该保单周年日），若被保险人经医疗机构专科医生确诊首次患上的重大疾病属于本条款"2.4.1重大疾病保险金"责任范围，且该重大疾病属于本条款"10.1重大疾病"定义中的第一组重大疾病（包括"恶性肿瘤—重度""侵蚀性葡萄胎（或称恶性葡萄胎）""原发性骨髓纤维化""严重骨髓增生异常综合征"），我们除给付重大疾病保险金之外，还将按本主险合同的基本保险金额的50%给付第一组重大疾病特别关爱保险金，给付后本主险合同的第一组重大疾病特别关爱保险金责任终止。在本主险合同保险期间内，第一组重大疾病特别关爱保险金的给付以本主险合同的基本保险金额的50%为限。",
            "payoutAmount": [
                {
                    "stageNumber": 1,
                    "period": "交费期间届满前",
                    "waitingPeriodStatus": "after",
                    "formula": "基本保额 * 50%",
                    "paymentPeriodStatus": "during",
                    "note": "仅适用于第一组重大疾病；累计给付以基本保额50%为限"
                }
            ]
        },
        
        # 2803: 重大疾病额外给付关爱金，50周岁前50%
        {
            "序号": 2803,
            "保单ID号": "太平洋人寿[2020]疾病保险191号",
            "责任类型": "疾病类",
            "责任名称": "重大疾病额外给付关爱金",
            "责任原文": "【重大疾病额外给付关爱金】在被保险人年满50周岁的合同生效日对应日前，若被保险人因遭受意外伤害或在本合同生效或最后一次复效（以较迟者为准）之日起180日后因意外伤害以外的原因被确诊初次发生本合同约定的重大疾病，我们除给付重大疾病保险金外，按本合同基本保险金额的50%给付重大疾病额外给付关爱金予重大疾病保险金受益人。",
            "payoutAmount": [
                {
                    "stageNumber": 1,
                    "period": "等待期后",
                    "waitingPeriodStatus": "after",
                    "formula": "基本保额 * 50%",
                    "ageConditions": [
                        {"type": "确诊时", "limit": 50, "operator": "<"}
                    ]
                }
            ]
        },
    ]
    
    # 生成JSON
    result = {
        "批次": 15,
        "序号范围": "2801-3000",
        "案例数量": len(cases),
        "cases": cases
    }
    
    output_file = '解析结果/解析结果-批次15-序号2801-3000.json'
    with open(output_file, 'w', encoding='utf-8') as f:
        json.dump(result, f, ensure_ascii=False, indent=2)
    
    print(f"✓ 已生成 {len(cases)} 个案例（初步版本）")
    print(f"✓ 保存至: {output_file}")
    print("\n⚠️  批次15共200个案例，当前仅生成前3个作为示例")
    print("需要继续完成剩余197个案例的解析")

if __name__ == '__main__':
    create_batch15_json()










